apply plugin: 'application'
// apply plugin: 'java'
apply plugin: 'java-library'

mainClassName = 'za.ac.sun.cs.deepsea.DEEPSEA'

repositories {
    jcenter()
}

dependencies {
	compile files("${System.properties['java.home']}/../lib/tools.jar")
	compile files("lib/green.jar")
	compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.9.0'
	compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.9.0'
    testImplementation 'junit:junit:4.12'
}

//javadoc {
//	source = sourceSets.main.allJava
//	println options
//	// javadoc   -subpackages za -d /tmp/dsdocs -notree -noindex -nohelp -nonavbar src
//	include 'za'
//	exclude 'org.apfloat'
//	options.noTree true
//	options.noIndex true
//	options.noHelp true
//	options.noNavBar true
//}

// Task to update the version information.
// Not the best solution, but it works.
// Refresh your Eclipse project to see the latest version.
task generateVersion {
	doFirst {
		def stdout = new ByteArrayOutputStream()
		exec {
			commandLine 'git', 'describe', '--tags', '--abbrev=0'
			standardOutput = stdout
		}
		def version = stdout.toString().trim()
		def versionFile = new File("$projectDir/src/main/resources/VERSION")
		versionFile.text = """$version"""
	}
}
compileJava.dependsOn generateVersion
